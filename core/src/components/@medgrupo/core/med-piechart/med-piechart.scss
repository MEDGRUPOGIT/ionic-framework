 @import "../../../../../templarios/abstracts";

 :host {
  --stroke: #{color('brand', '4')};
  --stroke-background: #{color('neutral', '2')};
  --front-background: transparent;
  --back-background: #{color('neutral', '2')};
  --text-color: color('neutral', '10');
 }

.med-piechart {
  &__container {
    height: 46px;
    width: 46px;
    position: relative;
    perspective: 80px;
    transform-style: preserve-3d;
  }

  &__side {
    height: 46px;
    width: 46px;
    position: absolute;
    top: 0;
    left: 0;
    backface-visibility: hidden;
    border-radius: 50%;
    transition: all 0.6s ease;

    &--front {
      background-color: var(--front-background);
    }

    &--back {
      background-color: var(--back-background);
      transform: rotateY(180deg);
    }
  }

  &__text {
    text-transform: uppercase;
    text-align: center;
    color: var(--text-color);
    position: absolute;
    top: calc(50% + 2px);
    left: 50%;
    transform: translate(-50%, -50%);
    max-width: 36px;
  }

  &__circle {
    width: auto;
    height: 100%;
    flex-shrink: 0;
  }

  &__circle {
    stroke-dashoffset: 0;
    stroke: var(--stroke-background);
    stroke-width: 2;
    stroke-linecap: round;
    stroke-linejoin: round;
    fill: none;
    transition: stroke-dasharray 1s ease-in-out;
    transform: rotate(-90deg);
    transform-origin: 18px 18px;

    &--porcentagem {
      stroke: var(--stroke);
      stroke-dasharray: var(--porcentagem) 100;
      animation: start 0.6s;
    }
  }
}

//////////////////////////////
// state
//////////////////////////////

:host(.med-piechart--active) {
  .med-piechart__side--front {
    transform: rotateY(-180deg);
  }

  .med-piechart__side--back {
    transform: rotateY(0);
  }
}

//////////////////////////////
// colors
//////////////////////////////

////////////////////
// color
////////////////////

:host(.med-color) {
  --stroke: #{curr-color('color', '4')};
}

////////////////////
// neutral
////////////////////

:host(.med-color-neutral) {
  --stroke: #{curr-color('neutral')};
}

////////////////////
// feedback
////////////////////

:host(.med-color-feedback) {
  --stroke: #{curr-color('feedback')};
}

//////////////////////////////
// animation
//////////////////////////////

@keyframes start {
  from {
      stroke-dasharray: 0 100;
  }

  to {
      stroke-dasharray: var(--porcentagem) 100;
  }
}
