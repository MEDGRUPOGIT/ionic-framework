<!DOCTYPE html>
<html dir="ltr" lang="en" class="dark-mode">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
    <title>Stencil Component Starter</title>

    <!-- <script type="module" src="./build/ionic.esm.js"></script>
    <script nomodule src="./build/ionic.js"></script> -->

    <link href="./css/ionic.bundle.css" rel="stylesheet">
    <link href="./src/stories/assets/fsemeric.css" rel="stylesheet">

    <script nomodule src="./dist/ionic/ionic.js"></script>
    <script type="module" src="./dist/ionic/ionic.esm.js"></script></head>
    <script type="module">
      import { modalController } from 'https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/index.esm.js';
      window.modalController = modalController;
    </script>
    <style>
      :root {
        --ion-font-family: 'fsemeric';
      }

      body {
        font-family: 'fsemeric';
        font-weight: 400;
      }

      .dark-mode ion-content {
        --background: #141414;
      }

      .light-mode ion-content {
        --background: #fafafa;
      }
      .modal {
        display: flex;
        flex-direction: column;
        justify-content: center;
        width: 500px;
        height: 500px;
        background-color: aquamarine;
      }
    </style>
  </head>
  <body class="dark-mode">
    <ion-app>
      <ion-content fullscreen class="ion-padding">
          <ion-button id="single" expand="block">Zoom image single</ion-button>
          <ion-button id="mult" expand="block">Zoom image mult</ion-button>
        <button id="theme">toggle theme</button>

        <div style="display: flex; justify-content: center;">
          <ion-icon color="dark-30" name="med-information"></ion-icon>
        </div>

      </ion-content>
    </ion-app>

    <script>
    const button1 = document.querySelector('#single');
    const button2 = document.querySelector('#mult');

    button1.addEventListener('click', createModal1);
    button2.addEventListener('click', createModal2);

    async function createModal1() {
      const modal = await modalController.create({
        component: 'med-image-zoom',
        componentProps:{imagens: [
          {link: "https://via.placeholder.com/500", legenda:"texto"},
        ]}
      });

      await modal.present();
    }


    async function createModal2() {
      const modal = await modalController.create({
        component: 'med-image-zoom',
        componentProps:{imagens: [
          {link: "https://via.placeholder.com/500", legenda:"texto"},
          {link: "https://via.placeholder.com/500", legenda:"texto2"},
          {link: "https://via.placeholder.com/500", legenda:"texto2"},
          {link: "https://via.placeholder.com/500", legenda:"texto3"},
          {link: "https://via.placeholder.com/500", legenda:"text4"},
        ]}
      });

      await modal.present();
    }

      document.querySelector('#theme').addEventListener('click', () => {
        const html = document.querySelector('html');
        const body = document.querySelector('body');

        if(body.classList.contains('dark-mode')) {
          body.classList.remove('dark-mode');
          body.classList.add('light-mode');
        } else {
          body.classList.add('dark-mode');
          body.classList.remove('light-mode');
        }
      })

      let currentPopover = null;

      const buttons = document.querySelectorAll('ion-icon');
      for (var i = 0; i < buttons.length; i++) {
        buttons[i].addEventListener('click', handleButtonClick);
      }

      async function handleButtonClick(ev) {
        popover = await popoverController.create({
          component: 'med-tooltip',
          cssClass: 'med-tooltip',
          showBackdrop: false,
          componentProps: {
            header: 'Título do Tutorial',
            content: 'Este é um exemplo de tootip em parágrafo. Esse box contém o tamanho máximo de texto que pode ser exibido. Acima disso, utilize um modal.',
            buttonLeft: {
              label: 'Pular tutorial',
            },
            buttonRight: {
              label: 'Confirmar e encerrar',
              icon: 'med-arrow-right-circle'
            }
          },
          mode: 'ios',
          event: ev,
        });
        currentPopover = popover;
        return popover.present();
      }

      function dismissPopover() {
        if (currentPopover) {
          currentPopover.dismiss().then(() => { currentPopover = null; });
        }
      }

      /* customElements.define('custom-popover', class ModalContent extends HTMLElement {
        connectedCallback() {
          this.innerHTML = `
            <med-tooltip>
              <p>Tooltip Simples</p>
            </med-tooltip>
          `;
        }
      }); */
    </script>
  </body>
</html>
